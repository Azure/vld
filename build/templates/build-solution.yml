# =============================================================================
# TEMPLATE: build-solution.yml
# =============================================================================
# PURPOSE: Build a Visual Studio solution using MSBuild.
#
# USAGE:
#   - template: build/templates/build-solution.yml
#     parameters:
#       solution: 'build_arm64\VLD.sln'
#       platform: 'ARM64'
#       configuration: 'Debug'
#
# NOTE: With native ARM64 agent (via 1ES provisioning script), we can use
# standard MSBuild task for all architectures. No SysNative workarounds needed.
# =============================================================================

parameters:
  - name: solution
    type: string
  - name: platform
    type: string
  - name: configuration
    type: string
  - name: msbuildArguments
    type: string
    default: '/t:restore /t:build'

steps:
- task: MSBuild@1
  displayName: 'Build solution ${{ parameters.configuration }}'
  inputs:
    solution: '${{ parameters.solution }}'
    platform: ${{ parameters.platform }}
    configuration: ${{ parameters.configuration }}
    msbuildArguments: '${{ parameters.msbuildArguments }}'
    maximumCpuCount: true
