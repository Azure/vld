# =============================================================================
# TEMPLATE: setup-vcvars.yml
# =============================================================================
# PURPOSE: Setup VC++ build environment for all architectures.
#
# USAGE:
#   - template: build/templates/setup-vcvars.yml
#     parameters:
#       vcvarsArg: 'amd64'     # vcvarsall argument (amd64, amd64_x86, arm64, etc.)
#
# NOTE: With native ARM64 agent (via 1ES provisioning script), we can use
# standard vcvarsall for all architectures. No WoW64 workarounds needed.
# =============================================================================

parameters:
  - name: vcvarsArg
    type: string
    default: ''

steps:
- task: BatchScript@1
  displayName: 'Setup VC++ Environment (${{ parameters.vcvarsArg }})'
  inputs:
    filename: '"C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Auxiliary\Build\vcvarsall.bat"'
    arguments: '${{ parameters.vcvarsArg }}'
    modifyEnvironment: true
